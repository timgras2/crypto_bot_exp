# Bitvavo API Configuration
BITVAVO_API_KEY=your_api_key_here
BITVAVO_API_SECRET=your_api_secret_here
BITVAVO_BASE_URL=https://api.bitvavo.com/v2

# Trading Configuration (Optional - defaults will be used if not set)
# ⚠️ SAFETY: Start with small amounts for testing!
MIN_PROFIT_PCT=5.0          # Stop loss percentage (5% loss = sell)
TRAILING_PCT=3.0            # Trailing stop percentage (lock in profits)
MAX_TRADE_AMOUNT=5.0        # EUR per trade - START SMALL!
CHECK_INTERVAL=10           # Seconds between market checks
MAX_RETRIES=3               # API retry attempts
RETRY_DELAY=5               # Seconds between retries
RATE_LIMIT=300              # API requests per minute
API_TIMEOUT=30              # API timeout in seconds
OPERATOR_ID=1001            # Required by Bitvavo API for order identification

# Dip Buying Configuration (Optional - Feature disabled by default)
# 🎯 DIP BUYING: Automatically rebuy assets after profitable sales when price drops
DIP_BUY_ENABLED=false             # Master toggle - set to 'true' to enable
DIP_MONITORING_HOURS=48           # Hours to monitor for dips after sale (default: 48)
DIP_COOLDOWN_HOURS=4              # Hours between rebuys per asset (default: 4)
DIP_MAX_REBUYS_PER_ASSET=3        # Maximum rebuy attempts per asset (default: 3)
DIP_USE_MARKET_FILTER=false       # Enable BTC trend filtering (default: false)

# Dip Levels Configuration (format: "threshold:allocation,threshold:allocation,...")
# Default: 40% capital at -10%, 35% at -20%, 25% at -35%
# Example: "15:0.6,25:0.4" = 60% at -15%, 40% at -25%
DIP_LEVELS=10:0.4,20:0.35,35:0.25  # threshold_pct:capital_allocation

# Asset Protection Configuration (Optional - Feature disabled by default)
# 🛡️ ASSET PROTECTION: Protect existing crypto assets from volatile swings
ASSET_PROTECTION_ENABLED=false          # Master toggle - set to 'true' to enable
PROTECTED_ASSETS=BTC-EUR,ETH-EUR        # Comma-separated list of assets to protect
MAX_PROTECTION_BUDGET=100.0             # Maximum EUR for protection operations per day

# Volatility-based Stop Loss
BASE_STOP_LOSS_PCT=15.0                 # Base stop loss percentage (default: 15%)
VOLATILITY_WINDOW_HOURS=24              # Hours of data for volatility calculation (default: 24)
VOLATILITY_MULTIPLIER=1.5               # Volatility adjustment factor (default: 1.5)

# DCA (Dollar Cost Averaging) on Dips
DCA_ENABLED=true                        # Enable DCA buying on significant dips
DCA_LEVELS=10:0.3,20:0.4,30:0.3        # DCA levels: threshold_pct:allocation
                                        # Default: 30% at -10%, 40% at -20%, 30% at -30%

# Profit Taking on Pumps
PROFIT_TAKING_ENABLED=true              # Enable profit taking on significant gains
PROFIT_TAKING_LEVELS=20:0.25,40:0.5    # Profit levels: threshold_pct:position_allocation
                                        # Default: sell 25% at +20%, sell 50% at +40%

# Portfolio Rebalancing (Advanced)
REBALANCING_ENABLED=false               # Enable automatic portfolio rebalancing
REBALANCING_THRESHOLD_PCT=10.0          # Rebalance when allocation drifts >10%
TARGET_ALLOCATIONS=BTC-EUR:0.6,ETH-EUR:0.4  # Target allocation percentages

# Risk Management
MAX_DAILY_TRADES=10                     # Maximum trades per day per asset
EMERGENCY_STOP_LOSS_PCT=25.0            # Emergency stop loss (immediate sell)
POSITION_SIZE_LIMIT_PCT=50.0            # Maximum percentage of budget per asset

# Swing Trading Protection (sell on drops, rebuy at lows) - Perfect for BTC protection!
SWING_TRADING_ENABLED=false               # Enable swing trading mode (default: false)
SWING_LEVELS=5:sell:0.25,10:sell:0.25,20:rebuy:0.5,30:rebuy:0.5  # Swing levels: threshold:action:allocation
                                          # Default: sell 25% at -5%, sell 25% at -10%, rebuy 50% at -20%, rebuy 50% at -30%
SWING_CASH_RESERVE_PCT=75.0               # Keep 75% of sale proceeds for rebuying (default: 75%)
SWING_TRAILING_STOP_ENABLED=true          # Trail stops upward on recovery (default: true)

# 🚀 ENHANCED BEAR MARKET PROTECTION (New Features)
# Adaptive strategy that changes based on market conditions for better protection

# Trend Detection (automatically detects market regime)
TREND_DETECTION_ENABLED=true              # Enable adaptive strategy switching (default: true)
BEAR_TREND_THRESHOLD=-10.0                # Percentage decline to trigger bear mode (default: -10%)
BULL_TREND_THRESHOLD=10.0                 # Percentage gain to trigger bull mode (default: 10%)
VOLATILITY_THRESHOLD=50.0                 # Daily volatility % for volatile mode (default: 50%)

# Bear Market Swing Levels (more aggressive protection)
BEAR_MARKET_SWING_LEVELS=2:sell:0.25,5:sell:0.30,10:sell:0.35,50:rebuy:0.4,70:rebuy:0.6

# 💎 ENHANCED ASSET PROTECTION (Trailing Profits + Dynamic Buybacks)
# Advanced features to capture gains while maintaining position exposure

# Trailing Profit Taking (gradual profit taking as price rises)
ENHANCED_PROTECTION_ENABLED=true          # Enable enhanced protection features (default: true)
TRAILING_START_GAIN_PCT=8.0               # Start trailing after +8% gains (default: 8%)
TRAILING_DISTANCE_PCT=5.0                 # Trail 5% below highest price (default: 5%)
TRAILING_INCREMENT_PCT=2.0                # Sell 2% of position per trigger (default: 2%)
MAX_TRAILING_SELLS=10                     # Maximum 10 trailing sells (20% max via trailing)

# Dynamic Buybacks (buy back near recent sell levels)
BUYBACK_TOLERANCE_PCT=3.0                 # Buy within 3% of sell price (default: 3%)
BUYBACK_PROFIT_RETENTION_PCT=5.0          # Keep 5% of sell as profit (default: 5%)

# Trade Cost Optimization (avoid unnecessary small trades)
MIN_TRADE_VALUE_EUR=20.0                  # Minimum EUR value per trade (default: 20)
MIN_MOVE_THRESHOLD_PCT=2.0                # Minimum 2% price move to trade (default: 2%)
                                          # Bear market: sell early (2%,5%,10%), rebuy deep (50%,70%)

# Bull Market Swing Levels (minimal selling, quick rebuys)  
BULL_MARKET_SWING_LEVELS=10:sell:0.15,18:rebuy:0.7,28:rebuy:0.3
                                          # Bull market: sell less, rebuy sooner

# Progressive Stop Loss (emergency protection)
PROGRESSIVE_STOP_LOSS_ENABLED=true        # Enable emergency stop loss in bear markets (default: true)
PROGRESSIVE_STOP_LOSS_THRESHOLD=20.0      # Sell all if decline exceeds this % in bear market (default: 20%)